<div
  class="sidebar-overlay"
  [ngClass]="{ active: isSidebarOpen && isMobile }"
  (click)="toggleSidebar()"
></div>

<button class="sidebar-toggle custom-transparent-btn" (click)="toggleSidebar()">
  <fa-icon [icon]="faBars"></fa-icon>
</button>

<div
  class="sidebar"
  [ngClass]="{ open: isSidebarOpen, collapsed: isCollapsed && !isMobile }"
>
  <div class="sidebar-header">
    <div
      class="logo-container"
      *ngIf="!isCollapsed || isMobile"
      (click)="navigateToHome()"
      style="cursor: pointer;"
      title="Ir al sitio principal"
      role="link"
      tabindex="0"
      (keydown.enter)="navigateToHome()"
      (keydown.space)="navigateToHome()"
    >
      <img
        src="../../../../assets/images/logo.jpg"
        alt="Logo INQTEL - Ir al sitio principal"
        class="logo-img"
      />
      <span class="logo-text">
        <span class="logo-panel">Panel</span><br />
        <span class="logo-admin">administrativo</span>
      </span>
    </div>

    <button
      class="collapse-toggle"
      *ngIf="!isMobile"
      (click)="toggleCollapse()"
      aria-label="Colapsar o expandir menú lateral"
    >
      <fa-icon [icon]="isCollapsed ? faChevronRight : faChevronLeft"></fa-icon>
    </button>
  </div>

  <div class="sidebar-content">
    <div class="sidebar-section">
      <p
        class="section-title"
        [class.collapsed-text]="isCollapsed && !isMobile"
      ></p>

      <a
        class="sidebar-link"
        routerLink="/admin/dashboard"
        routerLinkActive="active"
        (click)="closeSidebarOnMobile()"
        title="Ir al Dashboard"
      >
        <fa-icon [icon]="faTachometerAlt"></fa-icon>
        <span *ngIf="!isCollapsed || isMobile">Inicio</span>
      </a>

      <a
        class="sidebar-link"
        routerLink="/admin/clientes"
        routerLinkActive="active"
        (click)="closeSidebarOnMobile()"
        title="Gestionar Clientes"
      >
        <fa-icon [icon]="faUsers"></fa-icon>
        <span *ngIf="!isCollapsed || isMobile">Clientes</span>
      </a>

      <a
        class="sidebar-link"
        routerLink="/admin/facturas"
        routerLinkActive="active"
        (click)="closeSidebarOnMobile()"
        title="Gestionar Facturas"
      >
        <fa-icon [icon]="faFileInvoiceDollar"></fa-icon>
        <span *ngIf="!isCollapsed || isMobile">Facturas</span>
      </a>

      <a
        class="sidebar-link"
        routerLink="/admin/ajustes"
        routerLinkActive="active"
        (click)="closeSidebarOnMobile()"
        title="Ir a Ajustes"
      >
        <fa-icon [icon]="faCog"></fa-icon>
        <span *ngIf="!isCollapsed || isMobile">Ajustes</span>
      </a>

      <a
        class="sidebar-link"
        routerLink="/admin/perfil"
        routerLinkActive="active"
        (click)="closeSidebarOnMobile()"
        title="Ver Perfil"
      >
        <fa-icon [icon]="faUser"></fa-icon>
        <span *ngIf="!isCollapsed || isMobile">Perfil</span>
      </a>
    </div>

    <div class="sidebar-footer">
      <div class="user-info" [class.collapsed-user]="isCollapsed && !isMobile">
        <img
          [src]="currentUser?.avatarUrl || '../../../../assets/icons/avatar.png'"
          alt="Avatar de {{ currentUser?.nombre || 'usuario' }}"
          class="user-avatar"
        />
        <div class="user-details" *ngIf="!isCollapsed || isMobile">
          <span class="user-role">{{ currentUser?.rol || 'Invitado' }}</span>
          <span class="user-name">{{ currentUser?.nombre || 'Sin usuario' }}</span>
        </div>
      </div>
      <a
        class="sidebar-link text-danger logout-link"
        (click)="logout()"
        style="cursor: pointer;"
        title="Cerrar sesión"
        role="button"
        tabindex="0"
        (keydown.enter)="logout()"
        (keydown.space)="logout()"
      >
        <fa-icon [icon]="faRightFromBracket"></fa-icon>
        <span *ngIf="!isCollapsed || isMobile">Cerrar sesión</span>
      </a>
    </div>
  </div>
</div>